# XQPath æµ‹è¯•ä¼˜åŒ–é…ç½®

#

# æœ¬æ–‡ä»¶å®šä¹‰äº†æµ‹è¯•åˆ†ç»„ç­–ç•¥å’Œä¼˜åŒ–å»ºè®®

## ğŸ¯ æµ‹è¯•åˆ†ç»„ç­–ç•¥

### 1. æ ¸å¿ƒæµ‹è¯•ç»„ (core)

- **æ–‡ä»¶**: `integration.rs`, `lib.rs`
- **ç‰¹ç‚¹**: ä¸ä¾èµ–é¢å¤– featuresï¼Œæµ‹è¯•åŸºç¡€ API
- **è¿è¡Œæ—¶é—´**: ~2 ç§’
- **ç”¨é€”**: å¿«é€ŸéªŒè¯æ ¸å¿ƒåŠŸèƒ½

### 2. é…ç½®ç®¡ç†æµ‹è¯•ç»„ (config)

- **æ–‡ä»¶**: `config_debug_features.rs` (é…ç½®éƒ¨åˆ†)
- **Features**: `config-management`
- **è¿è¡Œæ—¶é—´**: ~1 ç§’
- **ç”¨é€”**: éªŒè¯é…ç½®ç³»ç»Ÿ

### 3. è°ƒè¯•åŠŸèƒ½æµ‹è¯•ç»„ (debug)

- **æ–‡ä»¶**: `config_debug_features.rs` (è°ƒè¯•éƒ¨åˆ†)
- **Features**: `interactive-debug`
- **è¿è¡Œæ—¶é—´**: ~1 ç§’
- **ç”¨é€”**: éªŒè¯äº¤äº’å¼è°ƒè¯•å™¨

### 4. é«˜çº§åŠŸèƒ½æµ‹è¯•ç»„ (advanced)

- **æ–‡ä»¶**: `advanced_functions.rs`, `builtin_functions.rs`
- **Features**: æ ¹æ®éœ€è¦
- **è¿è¡Œæ—¶é—´**: ~3 ç§’
- **ç”¨é€”**: éªŒè¯æ‰©å±•åŠŸèƒ½

## ğŸ“Š å½“å‰æµ‹è¯•çŠ¶æ€åˆ†æ

### æµ‹è¯•æ–‡ä»¶ç»Ÿè®¡

```
æ–‡ä»¶å                    | è¡Œæ•° | æµ‹è¯•æ•° | ä¸»è¦åŠŸèƒ½
-------------------------|------|--------|----------
integration.rs           | 323  | ~20    | åŸºç¡€é›†æˆæµ‹è¯•
advanced_functions.rs    | 357  | 11     | é«˜çº§å‡½æ•°æµ‹è¯•
config_debug_features.rs | 167  | 9      | é…ç½®å’Œè°ƒè¯•æµ‹è¯•
error_handling.rs        | 174  | ~15    | é”™è¯¯å¤„ç†æµ‹è¯•
builtin_functions.rs     | 102  | 3      | å†…ç½®å‡½æ•°æµ‹è¯•
conditional_expressions.rs| 147 | 5      | æ¡ä»¶è¡¨è¾¾å¼æµ‹è¯•
```

**æ€»è®¡**: ~1488 è¡Œä»£ç ï¼Œ~85 ä¸ªæµ‹è¯•ç”¨ä¾‹

## ğŸš€ ä¼˜åŒ–å»ºè®®

### 1. æ¸…ç†é‡å¤æµ‹è¯•

```bash
# åˆ é™¤é‡å¤çš„æµ‹è¯•æ–‡ä»¶
rm tests/v1_4_3_features.rs
```

### 2. æµ‹è¯•åˆ†å±‚æ‰§è¡Œ

```bash
# å¼€å‘æ—¶å¿«é€Ÿæµ‹è¯•
./scripts/test-runner.sh quick

# åŠŸèƒ½ç‰¹å®šæµ‹è¯•
./scripts/test-runner.sh config
./scripts/test-runner.sh debug

# å®Œæ•´æµ‹è¯•
./scripts/test-runner.sh all
```

### 3. å¹¶è¡Œä¼˜åŒ–

```bash
# å¯ç”¨å¹¶è¡Œæµ‹è¯•
./scripts/test-runner.sh quick --fast

# é™é»˜æ¨¡å¼
./scripts/test-runner.sh all --quiet
```

### 4. CI/CD åˆ†é˜¶æ®µ

```yaml
# .github/workflows/test.yml å»ºè®®é…ç½®
stages:
  - quick_test # æ ¸å¿ƒåŠŸèƒ½ (~3ç§’)
  - feature_test # åŠŸèƒ½ç‰¹æ€§ (~5ç§’)
  - full_test # å®Œæ•´æµ‹è¯• (~10ç§’)
```

## ğŸ“‹ æµ‹è¯•ç”¨ä¾‹ä¼˜åŒ–

### å‡å°‘æµ‹è¯•é‡å¤åº¦

1. **åˆå¹¶ç›¸ä¼¼æµ‹è¯•**: å°† config å’Œ debug æµ‹è¯•åˆå¹¶åˆ°ä¸€ä¸ªæ–‡ä»¶
2. **æå–å…¬å…± setup**: åˆ›å»ºæµ‹è¯•å·¥å…·å‡½æ•°
3. **å‡å°‘ IO æ“ä½œ**: ä½¿ç”¨å†…å­˜ä¸´æ—¶æ–‡ä»¶
4. **å¹¶è¡Œå®‰å…¨**: é¿å…å…¨å±€çŠ¶æ€ä¾èµ–

### æé«˜æµ‹è¯•æ•ˆç‡

1. **æ¡ä»¶ç¼–è¯‘**: ä½¿ç”¨`#[cfg(feature = "...")]`ç²¾ç¡®æ§åˆ¶
2. **æµ‹è¯•åˆ†ç»„**: ç”¨`#[ignore]`æ ‡è®°æ…¢é€Ÿæµ‹è¯•
3. **mock ä¾èµ–**: å‡å°‘å¤–éƒ¨ä¾èµ–
4. **ç¼“å­˜ç»“æœ**: é‡ç”¨æµ‹è¯•æ•°æ®

## ğŸ› ï¸ ä½¿ç”¨æŒ‡å—

### æ—¥å¸¸å¼€å‘

```bash
# å¿«é€ŸéªŒè¯æ›´æ”¹
./scripts/test-runner.sh core

# æµ‹è¯•ç‰¹å®šåŠŸèƒ½
./scripts/test-runner.sh config --verbose
```

### å‘å¸ƒå‰

```bash
# å®Œæ•´æµ‹è¯•å¥—ä»¶
./scripts/test-runner.sh all --fast

# æ€§èƒ½å›å½’æµ‹è¯•
./scripts/test-runner.sh performance
```

### è°ƒè¯•æµ‹è¯•

```bash
# è¯¦ç»†è¾“å‡º
./scripts/test-runner.sh debug --verbose

# å•ä¸ªæµ‹è¯•
cargo test test_config_manager_basic --features config-management -- --nocapture
```

## ğŸ¯ æ¨èçš„æµ‹è¯•æµç¨‹

### 1. å¼€å‘é˜¶æ®µ

- ä½¿ç”¨ `./scripts/test-runner.sh quick` è¿›è¡Œå¿«é€ŸéªŒè¯
- é’ˆå¯¹ä¿®æ”¹çš„åŠŸèƒ½è¿è¡Œå¯¹åº”çš„æµ‹è¯•ç»„

### 2. åŠŸèƒ½å®Œæˆ

- è¿è¡Œ `./scripts/test-runner.sh integration` ç¡®ä¿é›†æˆæ­£å¸¸
- æ£€æŸ¥ç›¸å…³çš„ feature æµ‹è¯•

### 3. å‘å¸ƒå‡†å¤‡

- è¿è¡Œ `./scripts/test-runner.sh all` è¿›è¡Œå®Œæ•´æµ‹è¯•
- æ‰§è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•

è¿™æ ·å¯ä»¥å°†æµ‹è¯•æ—¶é—´ä» ~15 ç§’ ä¼˜åŒ–åˆ° ~3 ç§’ï¼ˆæ—¥å¸¸å¼€å‘ï¼‰ï¼ŒåŒæ—¶ä¿æŒå®Œæ•´çš„æµ‹è¯•è¦†ç›–ç‡ã€‚
